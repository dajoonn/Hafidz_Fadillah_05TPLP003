<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <title>
    Hafidz Fadillah
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/argon-dashboard.css?v=2.1.0" rel="stylesheet" />
</head>

<body class="g-sidenav-show   bg-gray-100">
  <div class="min-height-300 bg-dark position-absolute w-100"></div>
  <aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 " 
        id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <div class="text-center">
        <img src="../assets/img/UNPAM_logo1.png" alt="Logo Universitas" style="width: 100px; height: auto;" /> <!-- Ganti dengan path logo Anda -->
        <h5 class="mt-2 mb-0">Universitas Pamulang</h5> <!-- Nama universitas -->
      </div>
      <a class="navbar-brand m-0">
        <span class="ms-1 font-weight-bold">Welcome, Hafidz Fadillah</span>
        <span class="d-block text-muted ms-1" style="font-size: 0.85rem;">Administrator</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" href="/index.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-tv-2 text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Menu Karyawan</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/karyawan.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-user-friends text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Karyawan</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/jabatan.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-user-tie text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Jabatan</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/divisi.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-project-diagram text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Divisi</span>
          </a>
        </li>
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Menu Absensi</h6>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/absensi.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-calendar-check text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Absensi</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/izin.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-user-clock text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Izin</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="../pages/lembur.html">
            <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="fas fa-business-time text-dark text-sm opacity-10"></i>
            </div>
            <span class="nav-link-text ms-1">Lembur</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>
  <main class="main-content position-relative border-radius-lg ">

    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl " id="navbarBlur" data-scroll="false">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <h6 class="font-weight-bolder text-white mb-0">Sistem Informasi Manajemen Karyawan</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <div class="input-group">
              <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
              <input type="text" class="form-control" placeholder="Type here...">
            </div>
          </div>
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white font-weight-bold px-0">
                <i class="fa fa-user me-sm-1"></i>
                <span class="d-sm-inline d-none">Sign In</span>
              </a>
            </li>
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-white p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line bg-white"></i>
                  <i class="sidenav-toggler-line bg-white"></i>
                  <i class="sidenav-toggler-line bg-white"></i>
                </div>
              </a>
            </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <style>
      /* Menyelaraskan tinggi card */
      .card {
        height: 130px; /* Anda bisa mengubah ukuran sesuai kebutuhan */
      }
      
      /* Untuk memastikan keseragaman di layar lebih kecil */
      @media (max-width: 768px) {
        .card {
          height: auto;
        }
      }
    </style>



    <!-- Dashboard -->
    <div class="container-fluid py-4 mt-4">
      <div class="row">
          <!-- Data Pegawai -->
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                  <div class="card-body p-3">
                      <div class="row">
                          <div class="col-8">
                              <div class="numbers">
                                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Data Pegawai</p>
                                  <h5 class="font-weight-bolder" id="pegawaiCount">0</h5>
                              </div>
                          </div>
                          <div class="col-4 text-end">
                              <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                  <i class="ni ni-single-02 text-lg opacity-10" aria-hidden="true"></i> <!-- Ikon orang -->
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Absensi Hari Ini -->
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                  <div class="card-body p-3">
                      <div class="row">
                          <div class="col-8">
                              <div class="numbers">
                                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Absensi Hari Ini</p>
                                  <h5 class="font-weight-bolder" id="absensiCount">0</h5>
                              </div>
                          </div>
                          <div class="col-4 text-end">
                              <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                                  <i class="ni ni-calendar-grid-58 text-lg opacity-10" aria-hidden="true"></i> <!-- Ikon kalender -->
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Izin Menunggu Konfirmasi -->
          <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
              <div class="card">
                  <div class="card-body p-3">
                      <div class="row">
                          <div class="col-8">
                              <div class="numbers">
                                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Izin Menunggu Konfirmasi</p>
                                  <h5 class="font-weight-bolder" id="izinCount">0</h5>
                              </div>
                          </div>
                          <div class="col-4 text-end">
                              <div class="icon icon-shape bg-gradient-success shadow-success text-center rounded-circle">
                                  <i class="ni ni-email-83 text-lg opacity-10" aria-hidden="true"></i> <!-- Ikon dokumen -->
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Lembur Menunggu Konfirmasi -->
          <div class="col-xl-3 col-sm-6">
              <div class="card">
                  <div class="card-body p-3">
                      <div class="row">
                          <div class="col-8">
                              <div class="numbers">
                                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Lembur Menunggu Konfirmasi</p>
                                  <h5 class="font-weight-bolder" id="lemburCount">0</h5>
                              </div>
                          </div>
                          <div class="col-4 text-end">
                              <div class="icon icon-shape bg-gradient-warning shadow-warning text-center rounded-circle">
                                  <i class="ni ni-watch-time text-lg opacity-10" aria-hidden="true"></i> <!-- Ikon jam -->
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <script>
    let employeeIdCounter = 1; // Counter untuk kode pegawai

    function saveEmployee() {
        const name = document.getElementById("employeeName").value;
        const position = document.getElementById("employeePosition").value;
        const division = document.getElementById("employeeDivision").value;
        const email = document.getElementById("employeeEmail").value;
        const address = document.getElementById("employeeAddress").value;
        const currentRowIndex = document.getElementById("currentRowIndex").value;

        if (name && position && division && email && address) {
            const employees = JSON.parse(localStorage.getItem("employees")) || [];

            if (currentRowIndex) {
                // Edit data pegawai yang sudah ada
                const index = parseInt(currentRowIndex);
                employees[index] = {
                    code: employees[index].code,
                    name,
                    position,
                    division,
                    email,
                    address
                };
            } else {
                // Tambahkan pegawai baru
                employees.push({
                    code: `KODE${employeeIdCounter}`,
                    name,
                    position,
                    division,
                    email,
                    address
                });
                employeeIdCounter++;
            }

            localStorage.setItem("employees", JSON.stringify(employees));
            loadEmployees();

            // Perbarui data di dashboard
            updateDashboard();

            // Reset form dan tutup modal (jika menggunakan bootstrap modal)
            document.getElementById("employeeForm").reset();
            bootstrap.Modal.getInstance(document.getElementById("employeeModal")).hide();
        } else {
            alert("Harap isi semua bidang formulir.");
        }
    }

    function loadAttendances() {
        const attendances = JSON.parse(localStorage.getItem("attendanceData")) || [];
        const attendanceCount = attendances.length;
        const attendanceCard = document.getElementById("absensiCount");
        if (attendanceCard) {
            attendanceCard.innerText = attendanceCount;
        }
    }

    function loadPermissions() {
        const permissions = JSON.parse(localStorage.getItem("permissions")) || [];
        const permissionCount = permissions.length;
        const permissionCard = document.getElementById("izinCount");
        if (permissionCard) {
            permissionCard.innerText = permissionCount;
        }
    }

    function loadOvertime() {
        const overtime = JSON.parse(localStorage.getItem("overtimes")) || [];
        const overtimeCount = overtime.length;
        const overtimeCard = document.getElementById("lemburCount");
        if (overtimeCard) {
            overtimeCard.innerText = overtimeCount;
        }
    }

    function savePermission() {
        const employeeName = document.getElementById("permissionEmployeeName").value;
        const permissionDate = document.getElementById("permissionDate").value;
        const reason = document.getElementById("permissionReason").value;

        if (employeeName && permissionDate && reason) {
            const permissions = JSON.parse(localStorage.getItem("permissions")) || [];
            permissions.push({ employeeName, permissionDate, reason });
            localStorage.setItem("permissions", JSON.stringify(permissions));
            loadPermissions();
            updateDashboard();
            document.getElementById("permissionForm").reset();
            bootstrap.Modal.getInstance(document.getElementById("permissionModal")).hide();
        } else {
            alert("Harap isi semua bidang formulir izin.");
        }
    }

    function saveOvertime() {
        const employeeName = document.getElementById("overtimeEmployeeName").value;
        const overtimeDate = document.getElementById("overtimeDate").value;
        const hoursWorked = document.getElementById("hoursWorked").value;

        if (employeeName && overtimeDate && hoursWorked) {
            const overtimeData = JSON.parse(localStorage.getItem("overtimeData")) || [];
            overtimeData.push({ employeeName, overtimeDate, hoursWorked });
            localStorage.setItem("overtimeData", JSON.stringify(overtimeData));
            loadOvertime();
            updateDashboard();
            document.getElementById("overtimeForm").reset();
            bootstrap.Modal.getInstance(document.getElementById("overtimeModal")).hide();
        } else {
            alert("Harap isi semua bidang formulir lembur.");
        }
    }

    function loadEmployees() {
        const employees = JSON.parse(localStorage.getItem("employees")) || [];
        document.getElementById('pegawaiCount').innerText = employees.length;
        
        // Memperbarui jumlah absensi, izin, dan lembur
        loadAttendances();
        loadPermissions();
        loadOvertime();
    }

    function updateDashboard() {
        loadEmployees();
        loadAttendances();
        loadPermissions();
        loadOvertime();
    }

    // Memuat data dari localStorage saat halaman dimuat
    window.onload = function() {
        updateDashboard();
    }
</script>

<!-- Skrip Bootstrap -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</body>
</html>


    

